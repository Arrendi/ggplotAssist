---
title: "Labelling Barplot"
author: "Keon-Woong Moon"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Labelling Barplot}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE,comment = NA,fig.align='center',out.width="90%")
```

In this vignette, you will learn how to add labels to bar plots representing counts and values. You can add labels using geom_text() function. If you want to add labels to the proportional bar plots, you have to make some manipulation of your data.

```{r,echo=FALSE}
require(tidyverse)
percentData<-mtcars %>% group_by(cyl) %>% count(gear) %>% mutate(ratio=scales::percent(n/sum(n)))
ggplot(mtcars,aes(x=factor(cyl),fill=factor(gear)))+
    geom_bar(position="fill")+
    geom_text(data=percentData,aes(y=n,label=ratio),position=position_fill(vjust=0.5))
```

## Make barplot with geom_bar()

The default `position` of the geom_bar() function is `stack` and the default stat is `count`. You can make bar plot with geom_bar(stat="count"). This is identical with stat_count(geom="bar").

```{r}
ggplot(mtcars,aes(x=factor(cyl),fill=factor(gear)))+geom_bar(stat="count")
ggplot(mtcars,aes(x=factor(cyl),fill=factor(gear)))+stat_count(geom="bar")
```

You can add labels to bar plot using geom_text(). You can add labels represneting counts with the following code. The geom_text() needs x,y and label. 

```{r}
ggplot(mtcars,aes(x=factor(cyl),fill=factor(gear)))+
    geom_bar()+
    geom_text(aes(label=..count..),stat="count",position=position_stack(vjust=0.5))
```